<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker Terminal Password Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        body {
            font-family: 'VT323', monospace;
            background-color: #0d1117;
            color: #28a745; /* Green */
            text-shadow: 0 0 2px #28a745;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .terminal-container {
            background-color: #010409;
            border: 2px solid #28a745;
            box-shadow: 0 0 10px #28a745;
            padding: 2.5rem;
            border-radius: 1rem;
        }
        .terminal-text {
            color: #28a745;
            font-size: 1.5rem;
        }
        .password-input {
            background-color: transparent;
            border: 2px dashed #28a745;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-size: 1.5rem;
            text-align: center;
            outline: none;
        }
        .password-input:focus {
            box-shadow: 0 0 5px #28a745;
        }
        .terminal-button {
            background-color: #28a745;
            color: #010409;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: transform 0.1s ease;
        }
        .terminal-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 5px #28a745;
        }
        .terminal-button:active {
            transform: scale(1);
        }
        .copy-button {
            display: none;
            width: fit-content;
        }
        .analysis-box, .mnemonic-box, .words-list {
            background-color: transparent;
            border: 2px dashed #28a745;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: left;
            white-space: pre-wrap;
            font-size: 1rem;
            display: none;
        }
        .words-list {
            font-size: 0.8rem;
            display: block;
            margin-top: 1rem;
            text-align: center;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="terminal-container w-full max-w-xl text-center">
        <h1 class="text-4xl terminal-text font-extrabold mb-6">PASSWORD_GENERATOR.sh</h1>

        <div class="flex flex-col items-center mb-6 space-y-4 md:space-y-0 md:flex-row md:space-x-4">
            <input type="text" id="password-output" class="password-input flex-grow" readonly placeholder="> [OUTPUT]">
            <button id="copy-btn" class="terminal-button copy-button">
                [COPY]
            </button>
        </div>
        
        <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-6">
            <button id="generate-btn" class="terminal-button text-2xl px-8 py-4 flex-grow">
                > GENERATE PASSWORD
            </button>
            <button id="analyze-btn" class="terminal-button text-2xl px-8 py-4 flex-grow">
                > ANALYZE STRENGTH ✨
            </button>
        </div>
        <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-6">
            <button id="mnemonic-btn" class="terminal-button text-2xl px-8 py-4 flex-grow">
                > MEMORIZE PASSWORD ✨
            </button>
            <button id="fetch-words-btn" class="terminal-button text-2xl px-8 py-4 flex-grow">
                > FETCH NEW WORDS ✨
            </button>
        </div>

        <div id="analysis-box" class="analysis-box"></div>
        <div id="mnemonic-box" class="mnemonic-box"></div>
        <div id="words-list" class="words-list">Current word list: <span id="word-display"></span></div>
        <p id="message-box" class="text-sm mt-4 opacity-0 transition-opacity duration-300"></p>
    </div>

    <script>
        // Initial word list (will be replaced by API call)
        let words = [
            'apple', 'banana', 'cherry', 'grape', 'lemon', 'orange', 'strawberry', 'melon', 'kiwi', 'mango',
            'cloud', 'river', 'forest', 'mountain', 'ocean', 'sunshine', 'thunder', 'lightning', 'breeze', 'shadow',
            'happy', 'silly', 'clever', 'brave', 'calm', 'quiet', 'bright', 'gentle', 'vibrant', 'curious',
            'bicycle', 'keyboard', 'computer', 'guitar', 'rocket', 'sandwich', 'telephone', 'diamond', 'treasure', 'whisper'
        ];

        // DOM elements
        const generateBtn = document.getElementById('generate-btn');
        const copyBtn = document.getElementById('copy-btn');
        const analyzeBtn = document.getElementById('analyze-btn');
        const mnemonicBtn = document.getElementById('mnemonic-btn');
        const fetchWordsBtn = document.getElementById('fetch-words-btn');
        const passwordOutput = document.getElementById('password-output');
        const analysisBox = document.getElementById('analysis-box');
        const mnemonicBox = document.getElementById('mnemonic-box');
        const wordsListDisplay = document.getElementById('word-display');
        const messageBox = document.getElementById('message-box');

        // Initial display of words
        wordsListDisplay.textContent = words.join(', ');

        // Function to show a temporary message
        function showMessage(text, duration = 2000) {
            messageBox.textContent = text;
            messageBox.classList.add('opacity-100');
            setTimeout(() => {
                messageBox.classList.remove('opacity-100');
            }, duration);
        }

        // Function to generate the password
        function generatePassword() {
            // Ensure at least 5 words are generated
            let passwordWords = [];
            const numWords = Math.floor(Math.random() * 3) + 5; // Generates between 5 and 7 words
            for (let i = 0; i < numWords; i++) {
                const randomIndex = Math.floor(Math.random() * words.length);
                const word = words[randomIndex];
                const randomNumber = Math.floor(Math.random() * 90) + 10; // Two-digit number
                passwordWords.push(`${word}${randomNumber}`);
            }

            const password = passwordWords.join('_');

            passwordOutput.value = password;
            copyBtn.style.display = 'inline-block'; // Show the copy button
            analysisBox.style.display = 'none'; // Hide the analysis box
            analysisBox.textContent = ''; // Clear analysis
            mnemonicBox.style.display = 'none'; // Hide the mnemonic box
            mnemonicBox.textContent = ''; // Clear mnemonic
        }

        // Function to copy the password to the clipboard
        function copyPassword() {
            if (passwordOutput.value) {
                passwordOutput.select();
                document.execCommand('copy');
                showMessage(' > [PASSWORD COPIED TO CLIPBOARD]');
            }
        }
        
        async function analyzePassword() {
            const password = passwordOutput.value;
            if (!password) {
                showMessage(' > [ERROR: GENERATE A PASSWORD FIRST]');
                return;
            }

            // Show a loading state
            analyzeBtn.textContent = 'ANALYZING...';
            analyzeBtn.disabled = true;
            analysisBox.style.display = 'block';
            analysisBox.textContent = 'ANALYZING PASSWORD...';
            mnemonicBox.style.display = 'none';

            // Gemini API call
            const systemPrompt = "Act as a cybersecurity AI in a vintage hacking terminal. Your task is to analyze a password and provide a brief, insightful, and slightly cryptic analysis of its strength. Focus on the word count, numbers, and the overall unpredictability. Your response should be a single, short paragraph of 2-3 sentences. Do not use markdown formatting.";
            const userQuery = `Password to analyze: ${password}`;

            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            let analysisText = "";
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }

                const result = await response.json();
                analysisText = result?.candidates?.[0]?.content?.parts?.[0]?.text || "ANALYSIS FAILED. RECONNECTING...";
            } catch (error) {
                console.error("Error analyzing password:", error);
                analysisText = "CONNECTION FAILED. RETRYING...";
            } finally {
                analysisBox.textContent = `> ${analysisText}`;
                analyzeBtn.textContent = '> ANALYZE STRENGTH ✨';
                analyzeBtn.disabled = false;
            }
        }
        
        async function generateMnemonic() {
            const password = passwordOutput.value;
            if (!password) {
                showMessage(' > [ERROR: GENERATE A PASSWORD FIRST]');
                return;
            }

            // Show a loading state
            mnemonicBtn.textContent = 'CREATING MNEMONIC...';
            mnemonicBtn.disabled = true;
            mnemonicBox.style.display = 'block';
            mnemonicBox.textContent = 'PROCESSING DATA...';
            analysisBox.style.display = 'none';

            const systemPrompt = "Act as a creative AI. Convert the provided password into a short, imaginative story or memorable sentence to aid in memorization. Do not mention the word 'password' or 'mnemonic'. The story should be no more than two sentences long.";
            const userQuery = `Password: ${password}`;
            
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            let mnemonicText = "";
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }

                const result = await response.json();
                mnemonicText = result?.candidates?.[0]?.content?.parts?.[0]?.text || "ERROR. STORY FAILED TO COMPILE.";
            } catch (error) {
                console.error("Error generating mnemonic:", error);
                mnemonicText = "COMMUNICATION BREAKDOWN. TRY AGAIN.";
            } finally {
                mnemonicBox.textContent = `> ${mnemonicText}`;
                mnemonicBtn.textContent = '> MEMORIZE PASSWORD ✨';
                mnemonicBtn.disabled = false;
            }
        }

        async function fetchNewWords() {
            // Show loading state
            fetchWordsBtn.textContent = 'FETCHING...';
            fetchWordsBtn.disabled = true;
            showMessage(' > [FETCHING NEW WORD LIST FROM DATABASE]');
            analysisBox.style.display = 'none';
            mnemonicBox.style.display = 'none';

            const systemPrompt = "Act as an AI specialized in generating secure, memorable password word lists. Provide a list of 15 unique, common English words, separated by commas. Do not include any other text or punctuation besides the words and commas. Do not use markdown.";
            const userQuery = "Generate a new word list.";
            
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }

                const result = await response.json();
                const newWordsString = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                if (newWordsString) {
                    words = newWordsString.split(',').map(word => word.trim());
                    wordsListDisplay.textContent = words.join(', ');
                    showMessage(' > [WORD LIST UPDATED SUCCESSFULLY]');
                } else {
                    showMessage(' > [ERROR: FAILED TO FETCH WORD LIST]');
                }
            } catch (error) {
                console.error("Error fetching new words:", error);
                showMessage(' > [COMMUNICATION FAILED. WORD LIST NOT UPDATED]');
            } finally {
                fetchWordsBtn.textContent = '> FETCH NEW WORDS ✨';
                fetchWordsBtn.disabled = false;
            }
        }

        // Event Listeners
        generateBtn.addEventListener('click', generatePassword);
        copyBtn.addEventListener('click', copyPassword);
        analyzeBtn.addEventListener('click', analyzePassword);
        mnemonicBtn.addEventListener('click', generateMnemonic);
        fetchWordsBtn.addEventListener('click', fetchNewWords);

    </script>
</body>
</html>
